---
import { Image } from 'astro:assets'
import Menu from '../icons/Menu.vue'

const { tradingMode } = Astro.params
const navClass: string =
  tradingMode === 'futures'
    ? 'bg-indigo-800 border-indigo-700'
    : tradingMode === 'spot'
      ? 'bg-sky-800 border-sky-700'
      : 'bg-gray-800 border-gray-700'
const currentPath: string = Astro.url.pathname
---

<nav class={navClass}>
  <div
    class="container flex flex-wrap items-center justify-between mx-auto p-4"
  >
    <div class="flex items-center">
      <a href="/">
        <Image src="/logo.webp" alt="Trading bot logo" width="50" height="50" />
      </a>
      <p class="ms-4">
        {
          tradingMode === 'futures'
            ? 'Futures trading'
            : tradingMode === 'spot'
              ? 'Spot trading'
              : null
        }
      </p>
    </div>
    <button
      data-collapse-toggle="navbar-solid-bg"
      type="button"
      class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm md:hidden focus:outline-none text-gray-400 hover:bg-gray-700"
      aria-controls="navbar-solid-bg"
      aria-expanded="false"
      id="navbar-toggle"
    >
      <span class="sr-only">Open main menu</span>
      <Menu />
    </button>
    <div class="hidden w-full md:block md:w-auto" id="navbar-menu">
      <ul
        class="flex flex-col font-medium mt-4 md:space-x-8 md:flex-row md:mt-0 md:border-0 bg-gray-800 md:bg-transparent border-gray-700"
      >
        <li>
          <a
            href="/"
            class={`block py-2 px-3 md:p-0  text-white md:border-0 md:hover:text-blue-500 hover:bg-gray-700 hover:text-white md:hover:bg-transparent ${currentPath === '/' ? 'md:text-blue-500 hover:bg-blue-600 bg-blue-600 md:bg-transparent' : ''}`}
          >
            Home
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const toggleButton = document.getElementById('navbar-toggle')
    const menu = document.getElementById('navbar-menu')

    if (toggleButton && menu) {
      toggleButton.addEventListener('click', () => {
        menu.classList.toggle('hidden')
      })
    }
  })
</script>
